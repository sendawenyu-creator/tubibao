<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Senda-US å“åå¯¹æ¯” 2024 vs 2025</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg:#0c0f14; --surface:#131820; --border:#1e2533;
    --c24:#f0a500; --c25:#38bdf8;
    --cpos:#34d399; --cneg:#f87171;
    --text:#dde6f0; --muted:#4a5a6e; --accent:#f87171;
  }
  *{margin:0;padding:0;box-sizing:border-box;}
  body{background:var(--bg);color:var(--text);font-family:'Syne',sans-serif;padding:32px 24px 60px;}
  .header{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:32px;flex-wrap:wrap;gap:16px;}
  .header h1{font-size:clamp(1.5rem,3vw,2.2rem);font-weight:800;letter-spacing:-1px;line-height:1.15;}
  .header h1 em{color:var(--accent);font-style:normal;}
  .header p{color:var(--muted);font-size:.75rem;letter-spacing:2px;text-transform:uppercase;margin-top:5px;}
  .legend{display:flex;gap:16px;align-items:center;}
  .legend-item{display:flex;align-items:center;gap:8px;font-size:.8rem;color:var(--muted);}
  .dot{width:10px;height:10px;border-radius:50%;}
  .kpis{display:grid;grid-template-columns:repeat(auto-fit,minmax(148px,1fr));gap:10px;margin-bottom:22px;}
  .kpi{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:14px 16px;}
  .kpi .lbl{font-size:.62rem;letter-spacing:2px;text-transform:uppercase;color:var(--muted);}
  .kpi .val{font-family:'DM Mono',monospace;font-size:1.3rem;font-weight:500;margin:5px 0 3px;}
  .chg{font-size:.75rem;font-weight:700;}
  .chg.pos{color:var(--cpos);} .chg.neg{color:var(--cneg);}
  .banner{border-radius:10px;padding:13px 16px;margin-bottom:13px;font-size:.79rem;line-height:1.7;}
  .banner.critical{background:rgba(248,113,113,.1);border:1px solid rgba(248,113,113,.35);color:#fca5a5;}
  .banner.critical strong{color:#fecaca;font-size:.85rem;}
  .banner.warn{background:rgba(251,191,36,.07);border:1px solid rgba(251,191,36,.25);color:#fcd34d;}
  .banner.warn strong{color:#fde68a;}
  .tabs{display:flex;gap:6px;margin-bottom:20px;flex-wrap:wrap;}
  .tab{padding:7px 16px;border-radius:40px;border:1px solid var(--border);background:transparent;
    color:var(--muted);font-family:'Syne',sans-serif;font-size:.76rem;cursor:pointer;transition:all .2s;}
  .tab.active,.tab:hover{border-color:var(--accent);color:var(--text);background:rgba(248,113,113,.1);}
  .card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:26px;margin-bottom:18px;display:none;}
  .card.active{display:block;}
  .card-title{font-size:.65rem;letter-spacing:3px;text-transform:uppercase;color:var(--muted);margin-bottom:18px;}
  .card-title strong{color:var(--text);font-size:.92rem;letter-spacing:0;display:block;margin-bottom:2px;font-weight:700;}
  canvas{max-height:380px;}
  .note{font-size:.68rem;color:var(--muted);margin-top:12px;text-align:right;}
  .sum-wrap{overflow-x:auto;}
  table{width:100%;border-collapse:collapse;font-size:.73rem;}
  thead th{background:#0d1117;color:var(--muted);padding:8px 10px;text-align:right;
    font-weight:400;font-size:.63rem;letter-spacing:1px;border-bottom:1px solid var(--border);white-space:nowrap;}
  thead th:first-child{text-align:left;}
  tbody td{padding:7px 10px;text-align:right;border-bottom:1px solid #0d1117;
    font-family:'DM Mono',monospace;white-space:nowrap;}
  tbody td:first-child{text-align:left;font-family:'Syne',sans-serif;color:var(--accent);font-size:.69rem;}
  tbody tr:hover td{background:rgba(255,255,255,.02);}
  .tpos{color:var(--cpos);} .tneg{color:var(--cneg);} .tnew{color:#fbbf24;font-weight:700;} .tstop{color:#f87171;font-weight:700;}
  .growth-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:10px;}
  .growth-card{background:#0d1117;border:1px solid var(--border);border-radius:10px;padding:14px;}
  .growth-card .prod{font-size:.73rem;color:var(--accent);margin-bottom:7px;font-weight:700;}
  .growth-card .metric{display:flex;justify-content:space-between;font-size:.69rem;margin:4px 0;}
  .growth-card .metric span:first-child{color:var(--muted);}
  .bar-track{height:4px;background:#1e2533;border-radius:2px;margin-top:10px;}
  .bar-fill{height:100%;border-radius:2px;}
  .verdict-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:4px;}
  .verdict-card{border-radius:10px;padding:14px 16px;font-size:.76rem;line-height:1.6;}
  .verdict-card.red{background:rgba(248,113,113,.09);border:1px solid rgba(248,113,113,.3);}
  .verdict-card.amber{background:rgba(251,191,36,.07);border:1px solid rgba(251,191,36,.25);}
  .verdict-card.tag{font-size:.63rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;margin-bottom:6px;}
  .verdict-card.red .tag{color:#f87171;} .verdict-card.amber .tag{color:#fbbf24;}
  .verdict-card .prod-name{font-weight:700;color:#dde6f0;margin-bottom:4px;}
</style>
</head>
<body>

<div class="header">
  <div>
    <h1>ğŸ‡ºğŸ‡¸ Senda-US<br><em>å“å</em> æ•°æ®å¯¹æ¯”</h1>
    <p>2024 vs 2025 Â· æŒ‰2025é”€å”®é¢æ’åº</p>
  </div>
  <div class="legend">
    <div class="legend-item"><div class="dot" style="background:var(--c24)"></div>2024</div>
    <div class="legend-item"><div class="dot" style="background:var(--c25)"></div>2025</div>
  </div>
</div>

<div class="banner critical">
  ğŸš¨ <strong>å…¨çº¿äºæŸè­¦æŠ¥ï¼š</strong>2024å¹´äºæŸ $34,616ï¼ˆåˆ©æ¶¦ç‡ -22.8%ï¼‰ï¼Œ2025å¹´å“åå®Œå…¨æ¢ä»£åäºæŸè¿›ä¸€æ­¥æ‰©å¤§è‡³ $59,683ï¼ˆåˆ©æ¶¦ç‡ -29.6%ï¼‰ã€‚é”€å”®é¢è™½å¢é•¿ 33%ï¼Œä½†å¹¿å‘Š ACOS ä» 37.3% æ¶åŒ–è‡³ 50.0%ï¼Œæ¯èŠ± $1 å¹¿å‘Šè´¹å¹³å‡ä»…å¸¦æ¥ $2 æ”¶å…¥ï¼Œå¹¿å‘Šä¸¥é‡æ‹–ç´¯ç»è¥ï¼Œ<strong>éœ€å¯¹æ•´ä½“è¿è¥ç­–ç•¥è¿›è¡Œæ ¹æœ¬æ€§è¯„ä¼°</strong>ã€‚
</div>
<div class="banner warn">
  âš ï¸ <strong>å“åæ¢ä»£æœªè§£å†³æ ¹æœ¬é—®é¢˜ï¼š</strong>2024å¹´å…¨éƒ¨æ—§å“ï¼ˆ20210ã€B2302ã€p1547 ç­‰ï¼‰å·²åœå”®æˆ–ç¼©å‡ï¼Œ2025å¹´å¼•å…¥ CY0330-33ã€P1991-2 ç­‰æ–°å“ï¼Œä½†æ–°å“ ACOS æ™®éè¶…è¿‡ 40%ï¼ŒP1991-2 äºæŸç‡é«˜è¾¾ -42%ï¼Œå“åæ›´è¿­æœªèƒ½æ”¹å˜æŒç»­äºæŸçš„å±€é¢ã€‚
</div>

<div class="kpis" id="kpis"></div>

<div class="tabs">
  <button class="tab active" onclick="show('overview',this)">âš ï¸ ç›ˆäºæ€»è§ˆ</button>
  <button class="tab" onclick="show('sales',this)">ğŸ“¦ é”€é‡</button>
  <button class="tab" onclick="show('revenue',this)">ğŸ’° é”€å”®é¢</button>
  <button class="tab" onclick="show('profit',this)">ğŸ“ˆ åˆ©æ¶¦</button>
  <button class="tab" onclick="show('ad',this)">ğŸ“£ å¹¿å‘ŠèŠ±è´¹</button>
  <button class="tab" onclick="show('rr',this)">ğŸ“‰ é€€è´§ç‡</button>
  <button class="tab" onclick="show('bubble',this)">ğŸ” ç»¼åˆæ°”æ³¡</button>
  <button class="tab" onclick="show('table',this)">ğŸ“‹ æ•°æ®è¡¨</button>
</div>

<div class="card active" id="card-overview">
  <div class="card-title"><strong>ç›ˆäºæ€»è§ˆ</strong>å„å“å2025å¹´åˆ©æ¶¦ç‡ vs ACOSï¼ˆæ‰€æœ‰å“åå‡äºæŸï¼‰</div>
  <canvas id="overviewChart"></canvas>
  <p class="note">æ‰€æœ‰2025å¹´åœ¨å”®å“åå‡ä¸ºäºæŸçŠ¶æ€ Â· æ¨ªçº¿=ç›ˆäºå¹³è¡¡ç‚¹</p>
  <div style="margin-top:20px;">
    <div class="card-title" style="margin-bottom:12px;"><strong>å“åå¤„ç½®å»ºè®®</strong></div>
    <div class="verdict-grid" id="verdictGrid"></div>
  </div>
</div>
<div class="card" id="card-sales"><div class="card-title"><strong>é”€é‡å¯¹æ¯”</strong>å„å“å Â· 2024 vs 2025</div><canvas id="salesChart"></canvas></div>
<div class="card" id="card-revenue"><div class="card-title"><strong>é”€å”®é¢å¯¹æ¯”</strong>å„å“å Â· 2024 vs 2025 (USD)</div><canvas id="revChart"></canvas></div>
<div class="card" id="card-profit"><div class="card-title"><strong>åˆ©æ¶¦å¯¹æ¯”</strong>å„å“å Â· 2024 vs 2025 (USD) â€” æ³¨æ„ï¼šæ‰€æœ‰å“åå‡äºæŸ</div><canvas id="profitChart"></canvas></div>
<div class="card" id="card-ad"><div class="card-title"><strong>å¹¿å‘ŠèŠ±è´¹ vs é”€å”®é¢</strong>å„å“å2025å¹´å¯¹æ¯” (USD)</div><canvas id="adChart"></canvas></div>
<div class="card" id="card-rr"><div class="card-title"><strong>é€€è´§ç‡å¯¹æ¯”</strong>å„å“å Â· 2024 vs 2025 (%) â€” é«˜é€€è´§ç‡åŠ é‡äºæŸ</div><canvas id="rrChart"></canvas></div>
<div class="card" id="card-bubble">
  <div class="card-title"><strong>ç»¼åˆæ°”æ³¡å›¾</strong>Xè½´=é”€å”®é¢ Â· Yè½´=åˆ©æ¶¦ Â· æ°”æ³¡å¤§å°=é”€é‡ Â· 2025æ•°æ®ï¼ˆæ³¨ï¼šæ‰€æœ‰å“åå‡åœ¨é›¶çº¿ä»¥ä¸‹ï¼‰</div>
  <canvas id="bubbleChart"></canvas>
</div>
<div class="card" id="card-table"><div class="card-title"><strong>å®Œæ•´æ•°æ®æ±‡æ€»</strong>æŒ‰å“å Â· å«å˜åŒ–%</div><div class="sum-wrap"><table id="sumTable"></table></div></div>

<script>
const rawData = [
  {p:"CY0330-33", sku:7, s24:0,   s25:193, ret24:0,  ret25:18, rr24:0,    rr25:8.5,  rev24:0,      rev25:102171, p24:0,       p25:-16807,  ad24:0,      ad25:43339, verdict:'amber', note:'æœ€å¤§å“åï¼ŒäºæŸ -16.4%ï¼ŒACOS 42.4%ã€‚æœ‰è§„æ¨¡åŸºç¡€ï¼Œéœ€å¤§å¹…å‹ç¼©å¹¿å‘Šï¼Œä¼˜åŒ–Listingæå‡è‡ªç„¶æµé‡å æ¯”'},
  {p:"P1991-2",   sku:3, s24:0,   s25:237, ret24:0,  ret25:24, rr24:0,    rr25:9.2,  rev24:0,      rev25:61131,  p24:0,       p25:-25657,  ad24:0,      ad25:38058, verdict:'red',   note:'äºæŸæœ€ä¸¥é‡ï¼Œ-$25,657ï¼ŒACOS 62.3%ï¼Œé€€è´§ç‡ 9.2%ã€‚å¹¿å‘Šä¸¥é‡å¤±æ§ï¼Œå»ºè®®ç«‹å³æš‚åœå¹¿å‘Šé‡æ–°è¯„ä¼°'},
  {p:"P1841-2",   sku:5, s24:0,   s25:126, ret24:0,  ret25:5,  rr24:0,    rr25:3.8,  rev24:0,      rev25:30871,  p24:0,       p25:-9809,   ad24:0,      ad25:16348, verdict:'amber', note:'äºæŸç‡ -31.8%ï¼ŒACOS 52.9%ï¼Œé€€è´§ç‡è¾ƒä½ï¼ˆ3.8%ï¼‰æ˜¯ä¼˜ç‚¹ï¼Œä½†å¹¿å‘Šæ•ˆç‡æå·®ï¼Œå»ºè®®å‰Šå‡å¹¿å‘Šè‡³ç»´æŒæ’åæœ€ä½é¢„ç®—'},
  {p:"20210",     sku:1, s24:69,  s25:0,   ret24:3,  ret25:0,  rr24:4.2,  rr25:0,    rev24:43580,  rev25:0,      p24:-339,    p25:0,       ad24:12894,  ad25:0,     verdict:'red',   note:'2024å¹´å·²åœå”®ï¼Œå¹¿å‘ŠèŠ±è´¹æé«˜ï¼ˆACOS 29.6%ï¼‰ï¼Œåœå”®å†³ç­–æ­£ç¡®'},
  {p:"B2302",     sku:5, s24:114, s25:0,   ret24:34, ret25:0,  rr24:23.0, rr25:0,    rev24:42449,  rev25:0,      p24:-13547,  p25:0,       ad24:17934,  ad25:0,     verdict:'red',   note:'2024å¹´åœå”®ï¼Œé€€è´§ç‡é«˜è¾¾ 23%ï¼ŒäºæŸä¸¥é‡ï¼Œåœå”®å†³ç­–æ­£ç¡®'},
  {p:"p1547",     sku:2, s24:98,  s25:7,   ret24:17, ret25:4,  rr24:14.8, rr25:36.4, rev24:57469,  rev25:4228,   p24:-16050,  p25:-6110,   ad24:24077,  ad25:2300,  verdict:'red',   note:'2025å¹´ä»…å‰© 7 ä»¶ï¼Œé€€è´§ç‡æš´å‡è‡³ 36.4%ï¼ŒäºæŸç‡ -144.5%ï¼Œå»ºè®®ç«‹å³åœå”®æ¸…åº“'},
  {p:"DS051-3",   sku:6, s24:0,   s25:11,  ret24:0,  ret25:0,  rr24:0,    rr25:0,    rev24:0,      rev25:3097,   p24:0,       p25:-1300,   ad24:0,      ad25:678,   verdict:'amber', note:'ä½“é‡æå°ï¼ŒäºæŸç‡ -42%ï¼Œå¯èƒ½å¤„äºå†·å¯åŠ¨åˆæœŸï¼Œéœ€è®¾ç½® 60å¤©è€ƒæ ¸èŠ‚ç‚¹'},
  {p:"12034",     sku:1, s24:18,  s25:0,   ret24:7,  ret25:0,  rr24:28.0, rr25:0,    rev24:7670,   rev25:0,      p24:-462,    p25:0,       ad24:1600,   ad25:0,     verdict:'red',   note:'2024å¹´åœå”®ï¼Œé€€è´§ç‡é«˜è¾¾ 28%ï¼Œæ­£ç¡®å†³ç­–'},
];

const active25 = rawData.filter(d=>d.s25>0);
const meaningful = rawData.filter(d=>d.s24+d.s25>0).sort((a,b)=>b.rev25-a.rev25);
const labels25 = active25.map(d=>d.p);
const labelsAll = meaningful.map(d=>d.p);

const sum = k => rawData.reduce((a,d)=>a+(d[k]||0),0);
const t24s=sum('s24'),t25s=sum('s25'),t24ret=sum('ret24'),t25ret=sum('ret25');
const t24r=sum('rev24'),t25r=sum('rev25'),t24p=sum('p24'),t25p=sum('p25');
const t24ad=sum('ad24'),t25ad=sum('ad25');

function chgStr(a,b){
  if(a===0&&b===0) return '';
  if(a===0) return '<span class="chg pos">NEW</span>';
  const p=((b-a)/Math.abs(a)*100).toFixed(1);
  return `<span class="chg ${p>=0?'pos':'neg'}">${p>=0?'+':''}${p}%</span>`;
}
function fmtK(v){
  const s=v<0?'-':''; const av=Math.abs(v);
  if(av>=1000000) return s+'$'+(av/1000000).toFixed(2)+'M';
  if(av>=1000) return s+'$'+(av/1000).toFixed(1)+'K';
  return s+'$'+Math.round(av);
}

document.getElementById('kpis').innerHTML=`
  <div class="kpi"><div class="lbl">æ€»é”€é‡ 2024</div><div class="val">${t24s}</div></div>
  <div class="kpi"><div class="lbl">æ€»é”€é‡ 2025</div><div class="val">${t25s}</div>${chgStr(t24s,t25s)}</div>
  <div class="kpi"><div class="lbl">æ€»é€€æ¬¾é‡ 2024</div><div class="val">${t24ret}</div></div>
  <div class="kpi"><div class="lbl">æ€»é€€æ¬¾é‡ 2025</div><div class="val">${t25ret}</div>${chgStr(t24ret,t25ret)}</div>
  <div class="kpi"><div class="lbl">æ€»é”€å”®é¢ 2024</div><div class="val">${fmtK(t24r)}</div></div>
  <div class="kpi"><div class="lbl">æ€»é”€å”®é¢ 2025</div><div class="val">${fmtK(t25r)}</div>${chgStr(t24r,t25r)}</div>
  <div class="kpi"><div class="lbl">æ€»åˆ©æ¶¦ 2024</div><div class="val" style="color:var(--cneg)">${fmtK(t24p)}</div></div>
  <div class="kpi"><div class="lbl">æ€»åˆ©æ¶¦ 2025</div><div class="val" style="color:var(--cneg)">${fmtK(t25p)}</div><span class="chg neg">â–¼ äºæŸæ‰©å¤§</span></div>
  <div class="kpi"><div class="lbl">æ€»å¹¿å‘Š 2024</div><div class="val">${fmtK(t24ad)}</div><div style="font-size:.7rem;color:#fbbf24">ACOS 37.3%</div></div>
  <div class="kpi"><div class="lbl">æ€»å¹¿å‘Š 2025</div><div class="val">${fmtK(t25ad)}</div><div style="font-size:.7rem;color:#f87171">ACOS 50.0% âš ï¸</div></div>
`;

Chart.defaults.color='#4a5a6e';
Chart.defaults.font.family="'DM Mono',monospace";
Chart.defaults.font.size=10;
const C24='#f0a500',C25='#38bdf8',CPOS='#34d399',CNEG='#f87171';

const baseOpts=(fmt='')=>({
  responsive:true,maintainAspectRatio:true,
  plugins:{
    legend:{labels:{color:'#7a8a9e',font:{size:11},boxWidth:12,padding:14}},
    tooltip:{backgroundColor:'#131820',borderColor:'#2a3545',borderWidth:1,
      titleColor:'#8a9ab0',bodyColor:'#dde6f0',padding:10,
      callbacks:fmt?{label:ctx=>`${ctx.dataset.label}: ${fmt==='$'?'$'+Math.round(ctx.raw).toLocaleString():ctx.raw+(fmt==='%'?'%':'')}`}:{}}
  },
  scales:{
    x:{ticks:{color:'#4a5a6e',maxRotation:35,font:{size:9}},grid:{color:'rgba(255,255,255,0.04)'}},
    y:{ticks:{color:'#4a5a6e',font:{size:9}},grid:{color:'rgba(255,255,255,0.04)'}}
  }
});

// Overview: profit margin vs ACOS bar chart for 2025 active products
new Chart(document.getElementById('overviewChart'),{type:'bar',
  data:{
    labels:labels25,
    datasets:[
      {label:'2025åˆ©æ¶¦ç‡ (%)',data:active25.map(d=>d.rev25>0?(d.p25/d.rev25*100).toFixed(1):0),
        backgroundColor:CNEG+'66',borderColor:CNEG,borderWidth:1.5,borderRadius:4},
      {label:'2025 ACOS (%)',data:active25.map(d=>d.rev25>0?(d.ad25/d.rev25*100).toFixed(1):0),
        backgroundColor:'#fbbf2466',borderColor:'#fbbf24',borderWidth:1.5,borderRadius:4},
    ]
  },
  options:{...baseOpts('%'),
    plugins:{...baseOpts('%').plugins,annotation:{annotations:{line:{type:'line',yMin:0,yMax:0,borderColor:'rgba(255,255,255,0.4)',borderWidth:2,borderDash:[6,4]}}}},
    scales:{...baseOpts().scales,y:{...baseOpts().scales.y,ticks:{...baseOpts().scales.y.ticks,callback:v=>v+'%'}}}}
});

// Verdict cards
document.getElementById('verdictGrid').innerHTML = active25.filter(d=>d.p25<0).map(d=>{
  const pm=(d.p25/d.rev25*100).toFixed(1);
  const acos=(d.ad25/d.rev25*100).toFixed(1);
  return `<div class="verdict-card ${d.verdict}">
    <div class="tag">${d.verdict==='red'?'ğŸ”´ é«˜é£é™© / å»ºè®®åœå”®':'ğŸŸ¡ å¾…è§‚å¯Ÿ / éœ€ä¼˜åŒ–'}</div>
    <div class="prod-name">${d.p}</div>
    <div style="font-size:.71rem;color:#9ca3af;margin-bottom:4px">åˆ©æ¶¦ç‡ ${pm}% Â· ACOS ${acos}%</div>
    <div style="font-size:.72rem;color:#c4c9d4">${d.note}</div>
  </div>`;
}).join('');

function barChart(id,labels,d24,d25,l24,l25,fmt=''){
  new Chart(document.getElementById(id),{type:'bar',data:{labels,datasets:[
    {label:l24,data:d24,backgroundColor:C24+'55',borderColor:C24,borderWidth:1.5,borderRadius:4},
    {label:l25,data:d25,backgroundColor:C25+'55',borderColor:C25,borderWidth:1.5,borderRadius:4},
  ]},options:baseOpts(fmt)});
}

barChart('salesChart',labelsAll,meaningful.map(d=>d.s24),meaningful.map(d=>d.s25),'2024é”€é‡','2025é”€é‡');
barChart('revChart',labelsAll,meaningful.map(d=>d.rev24),meaningful.map(d=>d.rev25),'2024é”€å”®é¢','2025é”€å”®é¢','$');
barChart('rrChart',labelsAll,meaningful.map(d=>d.rr24),meaningful.map(d=>d.rr25),'2024é€€è´§ç‡%','2025é€€è´§ç‡%','%');

new Chart(document.getElementById('profitChart'),{type:'bar',data:{labels:labelsAll,datasets:[
  {label:'2024åˆ©æ¶¦',data:meaningful.map(d=>d.p24),backgroundColor:CNEG+'44',borderColor:CNEG,borderWidth:1.5,borderRadius:4},
  {label:'2025åˆ©æ¶¦',data:meaningful.map(d=>d.p25),backgroundColor:'#f87171aa',borderColor:'#ef4444',borderWidth:1.5,borderRadius:4},
]},options:{...baseOpts('$'),scales:{...baseOpts().scales,y:{...baseOpts().scales.y,ticks:{...baseOpts().scales.y.ticks,callback:v=>v>=0?'$'+v:'-$'+Math.abs(v)}}}}});

// Ad spend vs Revenue for 2025
new Chart(document.getElementById('adChart'),{type:'bar',
  data:{labels:labels25,datasets:[
    {label:'2025é”€å”®é¢',data:active25.map(d=>d.rev25),backgroundColor:C25+'55',borderColor:C25,borderWidth:1.5,borderRadius:4},
    {label:'2025å¹¿å‘ŠèŠ±è´¹',data:active25.map(d=>d.ad25),backgroundColor:'#fbbf2466',borderColor:'#fbbf24',borderWidth:1.5,borderRadius:4},
  ]},options:baseOpts('$')
});

const PAL=['#f87171','#fbbf24','#fb923c','#f472b6','#c084fc','#60a5fa','#34d399'];
new Chart(document.getElementById('bubbleChart'),{type:'bubble',
  data:{datasets:active25.map((d,i)=>({
    label:d.p,data:[{x:d.rev25/1000,y:d.p25/1000,r:Math.max(6,Math.sqrt(d.s25)*2.5)}],
    backgroundColor:PAL[i%PAL.length]+'88',borderColor:PAL[i%PAL.length],borderWidth:1.5,
  }))},
  options:{responsive:true,plugins:{
    legend:{labels:{color:'#7a8a9e',font:{size:10},boxWidth:10,padding:8}},
    tooltip:{backgroundColor:'#131820',borderColor:'#2a3545',borderWidth:1,
      callbacks:{label:ctx=>{const d=active25[ctx.datasetIndex];
        return[d.p,`é”€å”®é¢: $${(d.rev25/1000).toFixed(1)}K`,`åˆ©æ¶¦: -$${(Math.abs(d.p25)/1000).toFixed(1)}K`,`é”€é‡: ${d.s25}`];}}}
  },
  scales:{
    x:{title:{display:true,text:'2025é”€å”®é¢ ($K)',color:'#7a8a9e'},ticks:{color:'#4a5a6e',callback:v=>v+'K'},grid:{color:'rgba(255,255,255,0.04)'}},
    y:{title:{display:true,text:'2025åˆ©æ¶¦ ($K)',color:'#7a8a9e'},ticks:{color:'#4a5a6e',callback:v=>v+'K'},grid:{color:'rgba(255,255,255,0.04)'}},
  }}
});

const pctChg=(a,b)=>a===0&&b===0?'â€”':a===0?'<span class="tnew">æ–°å“</span>':b===0?'<span class="tstop">åœå”®</span>':`<span class="${(b-a)>=0?'tpos':'tneg'}">${((b-a)/Math.abs(a)*100)>=0?'+':''}${((b-a)/Math.abs(a)*100).toFixed(1)}%</span>`;
const cls=v=>v>0?'tpos':v<0?'tneg':'';
document.getElementById('sumTable').innerHTML=`
<thead><tr>
  <th>å“å</th><th>SKU</th>
  <th>é”€é‡24</th><th>é”€é‡25</th><th>å˜åŒ–</th>
  <th>é€€æ¬¾24</th><th>é€€æ¬¾25</th>
  <th>é€€è´§ç‡24</th><th>é€€è´§ç‡25</th>
  <th>é”€å”®é¢24</th><th>é”€å”®é¢25</th><th>å˜åŒ–</th>
  <th>åˆ©æ¶¦24</th><th>åˆ©æ¶¦25</th><th>åˆ©æ¶¦å˜åŒ–</th>
  <th>å¹¿å‘Š24</th><th>å¹¿å‘Š25</th><th>å¹¿å‘Šå˜åŒ–</th>
</tr></thead>
<tbody>
${meaningful.map(d=>`<tr>
  <td>${d.p}</td><td>${d.sku}</td>
  <td>${d.s24}</td><td>${d.s25}</td><td>${pctChg(d.s24,d.s25)}</td>
  <td>${d.ret24}</td><td>${d.ret25||0}</td>
  <td>${d.rr24}%</td><td>${d.rr25}%</td>
  <td>$${d.rev24.toLocaleString()}</td><td>$${d.rev25.toLocaleString()}</td><td>${pctChg(d.rev24,d.rev25)}</td>
  <td class="${cls(d.p24)}">$${d.p24.toLocaleString()}</td>
  <td class="${cls(d.p25)}">$${d.p25.toLocaleString()}</td>
  <td class="${cls(d.p25-d.p24)}">${d.p25-d.p24>=0?'+':''}${(d.p25-d.p24).toLocaleString()}</td>
  <td>$${d.ad24.toLocaleString()}</td><td>$${d.ad25.toLocaleString()}</td><td>${pctChg(d.ad24,d.ad25)}</td>
</tr>`).join('')}
</tbody>`;

function show(name,btn){
  document.querySelectorAll('.card').forEach(c=>c.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.getElementById('card-'+name).classList.add('active');
  btn.classList.add('active');
}
</script>
</body>
</html>
